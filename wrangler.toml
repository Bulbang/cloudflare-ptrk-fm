name = "ptrk-fm-worker"
type = "javascript"

### Workers -> AccountID
account_id = "32ec5a45e61bb65267a5e522f2d1425d" 

workers_dev = true
compatibility_date = "2022-03-11"

# this should be created manually in cloudflare..
# workers -> worker -> settings -> KV namespace bindings
kv_namespaces = [ 
  { binding = "ARTICLES", id = "5d92f3a61bc74405a943c16bfad932e4" } 
]

### You should set CORS policy for bucket: Bucket -> Permisions -> Cross-origin resource sharing (CORS) -> Edit -> Paste  
# [
#     {
#         "AllowedHeaders": [],
#         "AllowedMethods": [
#             "GET",
#             "POST",
#             "PUT"
#         ],
#         "AllowedOrigins": [
#             "*"
#         ],
#         "ExposeHeaders": []
#     }
# ]

[vars]
AWS_REGION = "eu-central-1"
BUCKET_NAME = "ptrk"

## AWS KEY ID AND KEY | AWS - ACC - SECURITY Credentials - Access Key
## LOGIN AND PASSWORD for admin panel

# [secrets]
# AWS_ACCESS_KEY_ID
# AWS_SECRET_KEY

[build]
command = "yarn install --freeze-lockfile && yarn build"
[build.upload]
format = "service-worker"
